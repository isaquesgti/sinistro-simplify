<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SinistroSimplify</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide-react@latest"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@tanstack/react-query@5.28.14/build/lib/index.umd.js" crossorigin></script>
    <script src="https://unpkg.com/react-router-dom@6.22.0/dist/main.umd.js" crossorigin></script>
    <script src="https://unpkg.com/recharts@2.12.0/dist/recharts.min.js"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      body {
        font-family: 'Inter', sans-serif;
        color: #1a202c;
        background-color: #f7fafc;
      }
      .hover-scale {
          transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      }
      .hover-scale:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
      .insurance-primary {
          color: #1D4ED8;
      }
      .bg-insurance-primary {
          background-color: #1D4ED8;
      }
      .hover\\:bg-insurance-dark:hover {
          background-color: #1E40AF;
      }
      .insurance-secondary {
          color: #FBBF24;
      }
      .bg-insurance-secondary {
          background-color: #FBBF24;
      }
      .hover\\:bg-insurance-accent:hover {
          background-color: #F59E0B;
      }
      .insurance-light {
          background-color: #DBEAFE;
      }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/javascript">
    const { useState, useEffect, useRef } = React;
    const { createRoot } = ReactDOM;
    const { BrowserRouter, Routes, Route, Link, useNavigate, useParams, useLocation } = ReactRouterDOM;
    const { QueryClient, QueryClientProvider, useQuery } = ReactQuery;
    const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } = Recharts;

    const queryClient = new QueryClient();

    const { useToast } = (function () {
        const toast = (props) => {
            const event = new CustomEvent('show-toast', { detail: props });
            window.dispatchEvent(event);
        };
        const useToast = () => {
            return { toast };
        };
        return { useToast };
    })();

    const { Toaster, toast } = (function () {
        const Toaster = () => {
            const [toasts, setToasts] = useState([]);
            useEffect(() => {
                const handleShowToast = (event) => {
                    const newToast = {
                        id: Date.now(),
                        ...event.detail,
                    };
                    setToasts((prev) => [...prev, newToast]);
                    setTimeout(() => {
                        setToasts((prev) => prev.filter((t) => t.id !== newToast.id));
                    }, 5000);
                };
                window.addEventListener('show-toast', handleShowToast);
                return () => {
                    window.removeEventListener('show-toast', handleShowToast);
                };
            }, []);
            return (
                <div className="fixed top-4 right-4 z-[9999] flex flex-col gap-2 w-full max-w-xs">
                    {toasts.map((t) => (
                        <div key={t.id} className="bg-white border rounded-md p-4 shadow-lg">
                            <h4 className="font-semibold">{t.title}</h4>
                            <p className="text-sm text-gray-600">{t.description}</p>
                        </div>
                    ))}
                </div>
            );
        };
        const toast = (props) => {
            const event = new CustomEvent('show-toast', { detail: props });
            window.dispatchEvent(event);
        };
        return { Toaster, toast };
    })();

    const { Toaster: Sonner } = (function () {
        const Toaster = () => {
            const [toasts, setToasts] = useState([]);
            useEffect(() => {
                const handleShowToast = (event) => {
                    const newToast = {
                        id: Date.now(),
                        ...event.detail,
                    };
                    setToasts((prev) => [...prev, newToast]);
                    setTimeout(() => {
                        setToasts((prev) => prev.filter((t) => t.id !== newToast.id));
                    }, 5000);
                };
                window.addEventListener('show-sonner', handleShowToast);
                return () => {
                    window.removeEventListener('show-sonner', handleShowToast);
                };
            }, []);
            return (
                <div className="fixed top-4 right-4 z-[9999] flex flex-col gap-2 w-full max-w-xs">
                    {toasts.map((t) => (
                        <div key={t.id} className="bg-white border rounded-md p-4 shadow-lg">
                            <h4 className="font-semibold">{t.title}</h4>
                            <p className="text-sm text-gray-600">{t.description}</p>
                        </div>
                    ))}
                </div>
            );
        };
        return { Toaster };
    })();

    const { TooltipProvider } = (function () {
        const TooltipProvider = ({ children }) => {
            return children;
        };
        return { TooltipProvider };
    })();

    const { FileCheck, LogIn, Menu, X, User, Home, Info, Phone, Activity, MessageSquare, Clock, Shield, Users, ArrowLeft, Calendar, FileText, Paperclip, CheckCircle2, AlertCircle, Search, Filter, Plus, Bell, UserCog, Eye, CreditCard } = lucideReact;
    
    // ui components
    const Button = ({ children, className, ...props }) => <button className={`rounded-md font-medium transition-colors ${className}`} {...props}>{children}</button>;
    const Card = ({ children, className }) => <div className={`bg-white rounded-lg border shadow-sm ${className}`}>{children}</div>;
    const CardContent = ({ children, className }) => <div className={`p-6 pt-0 ${className}`}>{children}</div>;
    const CardDescription = ({ children, className }) => <p className={`text-sm text-gray-500 ${className}`}>{children}</p>;
    const CardHeader = ({ children, className }) => <div className={`flex flex-col space-y-1.5 p-6 ${className}`}>{children}</div>;
    const CardTitle = ({ children, className }) => <h3 className={`text-2xl font-semibold leading-none tracking-tight ${className}`}>{children}</h3>;
    const Input = ({ className, ...props }) => <input className={`flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`} {...props} />;
    const Label = ({ children, className, ...props }) => <label className={`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${className}`} {...props}>{children}</label>;
    const Tabs = ({ children, defaultValue, className, ...props }) => {
      const [activeTab, setActiveTab] = useState(defaultValue);
      return (
        <div {...props}>
          {React.Children.map(children, child => {
            if (child.type === TabsList) {
              return React.cloneElement(child, { activeTab, setActiveTab });
            }
            return child;
          })}
          {React.Children.map(children, child => {
            if (child.type === TabsContent && child.props.value === activeTab) {
              return child;
            }
            return null;
          })}
        </div>
      );
    };
    const TabsList = ({ children, className, activeTab, setActiveTab }) => (
      <div className={`inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 ${className}`}>
        {React.Children.map(children, child => 
          React.cloneElement(child, { activeTab, setActiveTab })
        )}
      </div>
    );
    const TabsTrigger = ({ children, value, className, activeTab, setActiveTab }) => (
      <button 
        className={`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${activeTab === value ? 'bg-white text-gray-950 shadow-sm' : ''} ${className}`}
        onClick={() => setActiveTab(value)}
      >
        {children}
      </button>
    );
    const TabsContent = ({ children, value, className }) => <div className={className}>{children}</div>;
    const Table = ({ children, className }) => <div className="w-full overflow-auto"><table className={`w-full caption-bottom text-sm ${className}`}>{children}</table></div>;
    const TableHeader = ({ children, className }) => <thead className={`[&_tr]:border-b ${className}`}>{children}</thead>;
    const TableBody = ({ children, className }) => <tbody className={`[&_tr:last-child]:border-0 ${className}`}>{children}</tbody>;
    const TableRow = ({ children, className }) => <tr className={`border-b transition-colors hover:bg-gray-100/50 data-[state=selected]:bg-gray-100 ${className}`}>{children}</tr>;
    const TableHead = ({ children, className }) => <th className={`h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0 ${className}`}>{children}</th>;
    const TableCell = ({ children, className }) => <td className={`p-4 align-middle [&:has([role=checkbox])]:pr-0 ${className}`}>{children}</td>;
    const Badge = ({ children, className }) => <div className={`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ${className}`}>{children}</div>;
    const Dialog = ({ open, onOpenChange, children }) => {
        const dialogRef = useRef(null);
        useEffect(() => {
            const handleEscape = (e) => {
                if (e.key === 'Escape') {
                    onOpenChange(false);
                }
            };
            if (open) {
                document.addEventListener('keydown', handleEscape);
            }
            return () => {
                document.removeEventListener('keydown', handleEscape);
            };
        }, [open, onOpenChange]);

        if (!open) return null;
        
        return (
            <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/80">
                {children}
            </div>
        );
    };
    const DialogContent = ({ children, className }) => (
        <div className={`relative z-50 bg-white p-6 rounded-lg w-full max-w-lg ${className}`}>
            {children}
        </div>
    );
    const DialogHeader = ({ children }) => <div className="flex flex-col space-y-1.5 text-center sm:text-left">{children}</div>;
    const DialogTitle = ({ children }) => <h2 className="text-lg font-semibold leading-none tracking-tight">{children}</h2>;
    const DialogDescription = ({ children }) => <p className="text-sm text-gray-500">{children}</p>;
    const DialogFooter = ({ children, className }) => <div className={`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 ${className}`}>{children}</div>;
    const DialogTrigger = ({ children, asChild }) => {
      if (asChild) {
        return children;
      }
      return <button>{children}</button>;
    };
    const RadioGroup = ({ children, className, ...props }) => <div className={`grid gap-2 ${className}`} {...props}>{children}</div>;
    const RadioGroupItem = ({ id, ...props }) => <input type="radio" id={id} className="peer hidden" {...props} />;
    const RadioGroupLabel = ({ children, htmlFor, className }) => <label htmlFor={htmlFor} className={`cursor-pointer ${className}`}>{children}</label>;
    
    // Components
    const useAuth = () => {
        const role = localStorage.getItem('userRole');
        const isAuthenticated = !!role;
        const login = (newRole) => {
            localStorage.setItem('userRole', newRole);
            window.location.reload();
        };
        const logout = () => {
            localStorage.removeItem('userRole');
            window.location.reload();
        };
        return { role, isAuthenticated, login, logout };
    };

    const ProtectedRoute = ({ children, allowedRole, redirectTo }) => {
        const auth = useAuth();
        if (!auth.isAuthenticated) {
            return <ReactRouterDOM.Navigate to="/" replace />;
        }
        if (auth.role !== allowedRole) {
            return <ReactRouterDOM.Navigate to={redirectTo} replace />;
        }
        return <>{children}</>;
    };

    const ClaimCard = ({ id, title, date, status, description, unreadMessages = 0 }) => {
        const navigate = useNavigate();
        const [messagesOpen, setMessagesOpen] = useState(false);
        const getStatusDetails = (status) => {
            switch (status) {
                case 'pending': return { text: 'Pendente', icon: Clock, colorClass: 'bg-yellow-100 text-yellow-700', iconClass: 'text-yellow-500' };
                case 'in_progress': return { text: 'Em análise', icon: Clock, colorClass: 'bg-blue-100 text-blue-700', iconClass: 'text-blue-500' };
                case 'completed': return { text: 'Concluído', icon: FileCheck, colorClass: 'bg-green-100 text-green-700', iconClass: 'text-green-500' };
                case 'rejected': return { text: 'Rejeitado', icon: X, colorClass: 'bg-red-100 text-red-700', iconClass: 'text-red-500' };
                default: return { text: 'Desconhecido', icon: Clock, colorClass: 'bg-gray-100 text-gray-700', iconClass: 'text-gray-500' };
            }
        };
        const handleViewDetails = () => navigate(`/claim/${id}`);
        const handleViewMessages = () => setMessagesOpen(true);
        const statusDetails = getStatusDetails(status);
        const StatusIcon = statusDetails.icon;
        return (
            <Card className="hover-scale">
                <CardHeader className="pb-4">
                    <CardTitle className="flex justify-between items-start">
                        {title}
                        <Badge className={`${statusDetails.colorClass} px-3 py-1 rounded-full text-xs font-medium flex items-center`}>
                            <StatusIcon className={`w-4 h-4 ${statusDetails.iconClass} mr-1`} />
                            {statusDetails.text}
                        </Badge>
                    </CardTitle>
                    <CardDescription className="flex justify-between items-center text-sm">
                        <span>Sinistro ID: {id}</span>
                        <span>Data: {date}</span>
                    </CardDescription>
                </CardHeader>
                <CardContent className="pb-4">
                    <p className="text-gray-600 line-clamp-2">{description}</p>
                </CardContent>
                <div className="p-6 pt-0 flex justify-end space-x-2">
                    <Button variant="outline" onClick={handleViewDetails} className="bg-white text-insurance-primary hover:bg-gray-100 hover:text-insurance-dark border-insurance-primary">
                        Ver detalhes
                    </Button>
                    <Button onClick={handleViewMessages} className="bg-insurance-secondary hover:bg-insurance-accent text-white flex items-center">
                        <MessageSquare className="w-4 h-4 mr-2" />
                        Mensagens
                        {unreadMessages > 0 && (
                            <span className="ml-2 bg-white text-insurance-secondary rounded-full px-1.5 py-0.5 text-xs font-bold">
                                {unreadMessages}
                            </span>
                        )}
                    </Button>
                </div>
            </Card>
        );
    };

    const ClaimMessagesDialog = ({ open, onOpenChange, claim }) => {
        const [newMessage, setNewMessage] = useState('');
        const messagesEndRef = useRef(null);

        const scrollToBottom = () => {
            messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
        };

        const mockMessages = {
            "SIN-2023-0001": [
                { id: "MSG-001", sender: "agent", text: "Olá! Recebemos seu reporte de sinistro. Precisamos que você envie mais fotos do veículo para análise.", timestamp: "16/05/2023 10:30", read: true },
                { id: "MSG-002", sender: "user", text: "Bom dia! Acabei de enviar as fotos que faltavam.", timestamp: "16/05/2023 11:45", read: true },
            ],
            "SIN-2023-0002": [
                { id: "MSG-003", sender: "agent", text: "Seu sinistro foi concluído. A transferência para o reparo foi agendada.", timestamp: "03/06/2023 14:00", read: true },
            ],
            "SIN-2023-0003": [
                { id: "MSG-004", sender: "agent", text: "O laudo pericial está em análise. Fique atento às atualizações.", timestamp: "20/06/2023 09:00", read: true },
            ],
        };
        
        const messages = mockMessages[claim.id] || [];

        const handleSendMessage = () => {
            if (newMessage.trim()) {
                const newMsg = {
                    id: `MSG-${Date.now()}`,
                    sender: 'user',
                    text: newMessage.trim(),
                    timestamp: new Date().toLocaleString(),
                    read: false,
                };
                mockMessages[claim.id] = [...messages, newMsg];
                setNewMessage('');
            }
        };

        useEffect(scrollToBottom, [messages]);
        
        return (
            <Dialog open={open} onOpenChange={onOpenChange}>
                <DialogContent className="sm:max-w-[425px] flex flex-col h-[80vh] max-h-[80vh]">
                    <DialogHeader>
                        <DialogTitle>Mensagens - {claim.title}</DialogTitle>
                        <DialogDescription>
                            Comunique-se com o analista responsável por este sinistro.
                        </DialogDescription>
                    </DialogHeader>
                    <div className="flex-grow overflow-y-auto p-4 border-t border-b -mx-6">
                        <div className="flex flex-col space-y-4">
                            {messages.length === 0 ? (
                                <div className="text-center text-gray-500 py-4">Nenhuma mensagem ainda.</div>
                            ) : (
                                messages.map((message) => (
                                    <div
                                        key={message.id}
                                        className={`flex items-start gap-3 ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}
                                    >
                                        <div
                                            className={`max-w-[75%] p-3 rounded-lg ${message.sender === 'user'
                                                ? 'bg-insurance-primary text-white'
                                                : 'bg-gray-100 text-gray-800'
                                            }`}
                                        >
                                            <div className="flex items-center space-x-2 mb-1">
                                                {message.sender === 'agent' && (
                                                    <MessageSquare className="w-4 h-4 text-insurance-primary" />
                                                )}
                                                <span className={`text-xs font-medium ${message.sender === 'user' ? 'text-white' : 'text-insurance-primary'}`}>
                                                    {message.sender === 'user' ? 'Você' : 'Analista'}
                                                </span>
                                            </div>
                                            <p className="text-sm">{message.text}</p>
                                            <p className={`text-xs mt-1 ${message.sender === 'user' ? 'text-white/80' : 'text-gray-500'}`}>
                                                {message.timestamp}
                                            </p>
                                        </div>
                                    </div>
                                ))
                            )}
                            <div ref={messagesEndRef} />
                        </div>
                    </div>
                    <DialogFooter className="flex-shrink-0">
                        <div className="flex w-full items-center space-x-2">
                            <Input
                                placeholder="Digite sua mensagem..."
                                value={newMessage}
                                onChange={(e) => setNewMessage(e.target.value)}
                                onKeyDown={(e) => {
                                    if (e.key === 'Enter' && !e.shiftKey) {
                                        e.preventDefault();
                                        handleSendMessage();
                                    }
                                }}
                                className="flex-1"
                            />
                            <Button
                                type="submit"
                                onClick={handleSendMessage}
                                className="bg-insurance-secondary hover:bg-insurance-accent"
                            >
                                <Send className="h-4 w-4" />
                            </Button>
                        </div>
                    </DialogFooter>
                </DialogContent>
            </Dialog>
        );
    };

    const InsurerRegistrationForm = ({ onSuccess }) => {
        const [formData, setFormData] = useState({
            companyName: '',
            cnpj: '',
            email: '',
            phone: '',
            plan: '',
        });

        const handleChange = (e) => {
            const { name, value } = e.target;
            setFormData(prev => ({ ...prev, [name]: value }));
        };

        const handleSubmit = (e) => {
            e.preventDefault();
            console.log("Form data:", formData);
            if (onSuccess) {
                onSuccess();
            }
            toast({
                title: "Sucesso!",
                description: "Seguradora cadastrada com sucesso.",
            });
        };
        
        return (
            <form onSubmit={handleSubmit} className="space-y-4">
                <div>
                    <Label htmlFor="companyName">Nome da Empresa</Label>
                    <Input id="companyName" name="companyName" value={formData.companyName} onChange={handleChange} placeholder="Nome da empresa" required />
                </div>
                <div>
                    <Label htmlFor="cnpj">CNPJ</Label>
                    <Input id="cnpj" name="cnpj" value={formData.cnpj} onChange={handleChange} placeholder="00.000.000/0000-00" required />
                </div>
                <div>
                    <Label htmlFor="email">Email</Label>
                    <Input id="email" name="email" value={formData.email} onChange={handleChange} type="email" placeholder="email@empresa.com" required />
                </div>
                <div>
                    <Label htmlFor="phone">Telefone</Label>
                    <Input id="phone" name="phone" value={formData.phone} onChange={handleChange} placeholder="(00) 00000-0000" required />
                </div>
                <div>
                    <Label htmlFor="plan">Plano</Label>
                    <select id="plan" name="plan" value={formData.plan} onChange={handleChange} className="flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50">
                        <option value="" disabled>Selecione um plano</option>
                        <option value="basic">Básico</option>
                        <option value="standard">Padrão</option>
                        <option value="premium">Premium</option>
                    </select>
                </div>
                <Button type="submit" className="w-full bg-insurance-primary text-white hover:bg-insurance-dark">
                    Registrar Seguradora
                </Button>
            </form>
        );
    };

    const Navbar = () => {
        const [isMenuOpen, setIsMenuOpen] = useState(false);
        const auth = useAuth();
        return (
            <nav className="bg-white shadow-sm py-3 px-4 sm:px-6 md:px-8">
                <div className="container mx-auto">
                    <div className="flex justify-between items-center">
                        <Link to="/" className="flex items-center space-x-2">
                            <FileCheck className="w-8 h-8 text-insurance-primary" />
                            <span className="text-xl font-bold text-insurance-primary">SinistroSimplify</span>
                        </Link>
                        <div className="hidden md:flex items-center space-x-8">
                            <Link to="/" className="text-gray-700 hover:text-insurance-secondary font-medium">Início</Link>
                            <Link to="/sobre" className="text-gray-700 hover:text-insurance-secondary font-medium">Sobre</Link>
                            <Link to="/contatos" className="text-gray-700 hover:text-insurance-secondary font-medium">Contato</Link>
                            {auth.isAuthenticated ? (
                                <>
                                    <Link to={auth.role === 'client' ? '/dashboard' : '/insurer'} className="bg-insurance-primary text-white px-4 py-2 rounded-md text-base font-medium inline-block text-center">
                                        Área do {auth.role === 'client' ? 'Cliente' : 'Analista'}
                                    </Link>
                                    <Button onClick={auth.logout} className="bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-base font-medium inline-block text-center hover:bg-gray-300">
                                        Sair
                                    </Button>
                                </>
                            ) : (
                                <Link to="/login" className="bg-insurance-primary text-white px-4 py-2 rounded-md text-base font-medium inline-block text-center flex items-center justify-center">
                                    <LogIn className="w-4 h-4 mr-2" />
                                    Entrar
                                </Link>
                            )}
                        </div>
                        <div className="md:hidden">
                            <Button onClick={() => setIsMenuOpen(!isMenuOpen)} className="p-2">
                                {isMenuOpen ? <X className="w-6 h-6" /> : <Menu className="w-6 h-6" />}
                            </Button>
                        </div>
                    </div>
                    {isMenuOpen && (
                        <div className="md:hidden mt-4 bg-white rounded-md shadow-lg py-2">
                            <Link to="/" onClick={() => setIsMenuOpen(false)} className="block px-4 py-2 text-gray-700 hover:bg-gray-100">Início</Link>
                            <Link to="/sobre" onClick={() => setIsMenuOpen(false)} className="block px-4 py-2 text-gray-700 hover:bg-gray-100">Sobre</Link>
                            <Link to="/contatos" onClick={() => setIsMenuOpen(false)} className="block px-4 py-2 text-gray-700 hover:bg-gray-100">Contato</Link>
                            {auth.isAuthenticated ? (
                                <>
                                    <Link to={auth.role === 'client' ? '/dashboard' : '/insurer'} onClick={() => setIsMenuOpen(false)} className="block px-4 py-2 text-insurance-primary hover:bg-gray-100">
                                        Área do {auth.role === 'client' ? 'Cliente' : 'Analista'}
                                    </Link>
                                    <Button onClick={auth.logout} className="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100">Sair</Button>
                                </>
                            ) : (
                                <Link to="/login" onClick={() => setIsMenuOpen(false)} className="block px-4 py-2 text-insurance-primary hover:bg-gray-100">Entrar</Link>
                            )}
                        </div>
                    )}
                </div>
            </nav>
        );
    };

    const Hero = () => (
        <div className="bg-gradient-to-br from-insurance-light to-white py-16 md:py-24">
            <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex flex-col lg:flex-row items-center">
                    <div className="lg:w-1/2 lg:pr-12 mb-10 lg:mb-0">
                        <h1 className="text-4xl md:text-5xl font-bold text-insurance-primary mb-6 leading-tight">
                            Simplifique todo o processo de resolução de sinistros
                        </h1>
                        <p className="text-lg text-gray-700 mb-8">
                            Conectamos seguradoras e clientes em uma plataforma única, agilizando todo o fluxo de atendimento e resolução de sinistros.
                        </p>
                        <div className="flex flex-col sm:flex-row gap-4">
                            <Link to="/login">
                                <Button className="bg-insurance-primary hover:bg-insurance-dark text-white px-6 py-3 font-medium text-base w-full sm:w-auto">
                                    Acessar plataforma
                                </Button>
                            </Link>
                            <Link to="/sobre">
                                <Button variant="outline" className="border border-insurance-primary text-insurance-primary bg-transparent hover:bg-insurance-light px-6 py-3 font-medium text-base w-full sm:w-auto">
                                    Saiba mais
                                </Button>
                            </Link>
                        </div>
                    </div>
                    <div className="lg:w-1/2 flex justify-center">
                        <div className="p-8 bg-white rounded-lg shadow-xl max-w-lg w-full">
                            <div className="flex items-center mb-6">
                                <FileCheck className="w-8 h-8 text-insurance-secondary mr-3" />
                                <h2 className="text-2xl font-semibold text-insurance-primary">Processo simplificado</h2>
                            </div>
                            <div className="space-y-4">
                                <div className="flex items-start">
                                    <div className="bg-insurance-secondary/10 p-2 rounded-full mr-4 mt-1">
                                        <Clock className="w-5 h-5 text-insurance-secondary" />
                                    </div>
                                    <div>
                                        <h3 className="font-medium text-lg text-insurance-primary">Resposta rápida</h3>
                                        <p className="text-gray-600">Acompanhe em tempo real o status da sua solicitação.</p>
                                    </div>
                                </div>
                                <div className="flex items-start">
                                    <div className="bg-insurance-secondary/10 p-2 rounded-full mr-4 mt-1">
                                        <Shield className="w-5 h-5 text-insurance-secondary" />
                                    </div>
                                    <div>
                                        <h3 className="font-medium text-lg text-insurance-primary">Segurança garantida</h3>
                                        <p className="text-gray-600">Seus dados e documentos protegidos com alta segurança.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );

    const Features = () => {
        const features = [
            { title: "Envio de documentos", description: "Faça o upload dos documentos necessários diretamente pela plataforma, sem burocracia.", icon: FileCheck },
            { title: "Comunicação integrada", description: "Chat direto com a seguradora para tirar dúvidas e acompanhar seu processo.", icon: MessageSquare },
            { title: "Status em tempo real", description: "Acompanhe o andamento do seu sinistro com atualizações em tempo real.", icon: Activity },
            { title: "Atendimento rápido", description: "Processos otimizados para garantir um atendimento ágil e eficiente.", icon: Clock },
            { title: "Dados seguros", description: "Toda comunicação e documentos são protegidos com criptografia avançada.", icon: Shield },
            { title: "Multiusuários", description: "Acesso para corretores, clientes e seguradoras em uma única plataforma.", icon: Users },
        ];
        return (
            <section className="py-16 md:py-24 bg-white">
                <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="text-center mb-16">
                        <h2 className="text-3xl md:text-4xl font-bold text-insurance-primary mb-4">Recursos que facilitam sua vida</h2>
                        <p className="text-lg text-gray-600 max-w-3xl mx-auto">
                            Nossa plataforma foi desenhada para tornar o processo de sinistro mais simples, transparente e rápido para todas as partes envolvidas.
                        </p>
                    </div>
                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {features.map((feature, index) => (
                            <div key={index} className="bg-insurance-light rounded-lg p-6 hover-scale border border-gray-100 shadow-sm">
                                <div className="bg-insurance-secondary/10 p-3 rounded-full w-14 h-14 flex items-center justify-center mb-4">
                                    <feature.icon className="w-7 h-7 text-insurance-secondary" />
                                </div>
                                <h3 className="text-xl font-semibold text-insurance-primary mb-2">{feature.title}</h3>
                                <p className="text-gray-600">{feature.description}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>
        );
    };

    const Footer = () => (
        <footer className="bg-insurance-primary text-white pt-12 pb-6">
            <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
                    <div>
                        <div className="flex items-center space-x-2 mb-4">
                            <FileCheck className="w-6 h-6 text-insurance-secondary" />
                            <span className="text-lg font-bold">SinistroSimplify</span>
                        </div>
                        <p className="text-gray-300 mb-4">Simplificando o processo de atendimento e resolução de sinistros para seguradoras e clientes.</p>
                        <div className="flex space-x-4">
                            <a href="#" className="text-gray-300 hover:text-insurance-secondary transition">
                                <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path fillRule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.778-1.63 1.563V12h2.775l-.44 2.89h-2.335v6.988C18.343 21.128 22 16.991 22 12z" clipRule="evenodd" />
                                </svg>
                            </a>
                        </div>
                    </div>
                    <div>
                        <h3 className="text-lg font-semibold mb-4">Navegação</h3>
                        <ul className="space-y-4">
                            <li><Link to="/" className="text-gray-300 hover:text-insurance-secondary transition">Início</Link></li>
                            <li><Link to="/sobre" className="text-gray-300 hover:text-insurance-secondary transition">Sobre nós</Link></li>
                            <li><Link to="/contatos" className="text-gray-300 hover:text-insurance-secondary transition">Contato</Link></li>
                        </ul>
                    </div>
                    <div>
                        <h3 className="text-lg font-semibold mb-4">Recursos</h3>
                        <ul className="space-y-4">
                            <li><Link to="#" className="text-gray-300 hover:text-insurance-secondary transition">Área do Cliente</Link></li>
                            <li><Link to="#" className="text-gray-300 hover:text-insurance-secondary transition">Área da Seguradora</Link></li>
                            <li><Link to="#" className="text-gray-300 hover:text-insurance-secondary transition">Perguntas frequentes</Link></li>
                        </ul>
                    </div>
                    <div>
                        <h3 className="text-lg font-semibold mb-4">Contato</h3>
                        <ul className="space-y-4">
                            <li className="flex items-start">
                                <Mail className="w-5 h-5 text-insurance-secondary mr-3 mt-0.5" />
                                <a href="mailto:contato@sinistrosimplify.com" className="text-gray-300 hover:text-insurance-secondary transition">
                                    contato@sinistrosimplify.com
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div className="border-t border-gray-700 pt-6 mt-6">
                    <p className="text-center text-gray-400 text-sm">
                        &copy; 2024 SinistroSimplify. Todos os direitos reservados.
                    </p>
                </div>
            </div>
        </footer>
    );

    const NewInsurerDialog = ({ onSuccess }) => {
        const [open, setOpen] = useState(false);
        const handleSuccess = () => {
            setOpen(false);
            if (onSuccess) {
                onSuccess();
            }
        };
        return (
            <Dialog open={open} onOpenChange={setOpen}>
                <DialogTrigger asChild>
                    <Button className="bg-insurance-secondary hover:bg-insurance-accent text-white">Nova Seguradora</Button>
                </DialogTrigger>
                <DialogContent className="sm:max-w-[500px]">
                    <DialogHeader>
                        <DialogTitle>Cadastrar Nova Seguradora</DialogTitle>
                        <DialogDescription>
                            Preencha os dados da seguradora para criar uma nova conta.
                        </DialogDescription>
                    </DialogHeader>
                    <InsurerRegistrationForm onSuccess={handleSuccess} />
                </DialogContent>
            </Dialog>
        );
    };

    const Dashboard = () => {
        const [filter, setFilter] = useState('');
        const [activeTab, setActiveTab] = useState('all');
        const auth = useAuth();
        const mockClaims = [
            { id: "SIN-2023-0001", title: "Sinistro Automóvel - Colisão", date: "15/05/2023", status: "in_progress", description: "Colisão traseira na Av. Paulista, envolvendo dois veículos. Danos moderados no para-choque e porta traseira.", unreadMessages: 2 },
            { id: "SIN-2023-0002", title: "Sinistro Residencial - Alagamento", date: "03/06/2023", status: "completed", description: "Inundação no subsolo devido a fortes chuvas. Danos a móveis e equipamentos.", unreadMessages: 0 },
            { id: "SIN-2023-0003", title: "Sinistro Saúde - Cirurgia", date: "20/06/2023", status: "pending", description: "Solicitação de cobertura para procedimento cirúrgico de emergência. Aguardando aprovação.", unreadMessages: 1 },
            { id: "SIN-2023-0004", title: "Sinistro Viagem - Bagagem", date: "10/07/2023", status: "rejected", description: "Perda de bagagem em voo internacional. Laudo de análise finalizado.", unreadMessages: 0 }
        ];
        const filteredClaims = mockClaims.filter(claim =>
            claim.title.toLowerCase().includes(filter.toLowerCase()) ||
            claim.id.toLowerCase().includes(filter.toLowerCase()) ||
            claim.description.toLowerCase().includes(filter.toLowerCase())
        );
        const getStatusCounts = (claims) => {
            const counts = { all: claims.length, pending: 0, in_progress: 0, completed: 0, rejected: 0 };
            claims.forEach(claim => {
                if (counts.hasOwnProperty(claim.status)) {
                    counts[claim.status]++;
                }
            });
            return counts;
        };
        const statusCounts = getStatusCounts(mockClaims);
        return (
            <div className="min-h-screen flex flex-col">
                <Navbar />
                <main className="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
                    <div className="flex justify-between items-center mb-6">
                        <h1 className="text-3xl font-bold text-insurance-primary flex items-center">
                            <User className="w-8 h-8 mr-2 text-insurance-secondary" />
                            Área do Cliente
                        </h1>
                        <Button className="bg-insurance-secondary hover:bg-insurance-accent text-white flex items-center">
                            <Plus className="w-4 h-4 mr-2" />
                            Novo Sinistro
                        </Button>
                    </div>
                    <div className="grid lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2">
                            <div className="bg-white shadow-sm rounded-lg p-6 mb-6">
                                <div className="flex flex-col sm:flex-row justify-between items-center mb-4 gap-4">
                                    <div className="relative flex-grow w-full sm:w-auto">
                                        <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500" />
                                        <Input
                                            placeholder="Buscar sinistro..."
                                            className="pl-9 w-full"
                                            value={filter}
                                            onChange={(e) => setFilter(e.target.value)}
                                        />
                                    </div>
                                    <div className="w-full sm:w-auto">
                                        <Button variant="outline" className="w-full text-gray-700 hover:bg-gray-100 flex items-center">
                                            <Filter className="w-4 h-4 mr-2" />
                                            Filtros
                                        </Button>
                                    </div>
                                </div>
                                <Tabs defaultValue="all" onValueChange={setActiveTab} className="mt-4">
                                    <TabsList className="grid w-full grid-cols-2 sm:grid-cols-5">
                                        <TabsTrigger value="all">Todos ({statusCounts.all})</TabsTrigger>
                                        <TabsTrigger value="pending">Pendente ({statusCounts.pending})</TabsTrigger>
                                        <TabsTrigger value="in_progress">Em Análise ({statusCounts.in_progress})</TabsTrigger>
                                        <TabsTrigger value="completed">Concluído ({statusCounts.completed})</TabsTrigger>
                                        <TabsTrigger value="rejected">Rejeitado ({statusCounts.rejected})</TabsTrigger>
                                    </TabsList>
                                    <div className="mt-6 space-y-6">
                                        {filteredClaims.filter(claim => activeTab === 'all' || claim.status === activeTab).map(claim => (
                                            <ClaimCard key={claim.id} {...claim} />
                                        ))}
                                    </div>
                                    {filteredClaims.filter(claim => activeTab === 'all' || claim.status === activeTab).length === 0 && (
                                        <div className="text-center py-12 text-gray-500">
                                            <FileText className="w-16 h-16 mx-auto mb-4" />
                                            <h3 className="text-lg font-medium mb-2">Nenhum sinistro encontrado.</h3>
                                            <p className="text-sm">Tente ajustar seus filtros de busca.</p>
                                        </div>
                                    )}
                                </Tabs>
                            </div>
                        </div>
                        <div className="space-y-6">
                            <div className="bg-white shadow-sm rounded-lg p-6">
                                <h2 className="text-xl font-semibold text-insurance-primary flex items-center mb-6">
                                    <MessageSquare className="w-5 h-5 mr-2 text-insurance-secondary" />
                                    Mensagens Recentes
                                </h2>
                                <div className="text-center py-8">
                                    <MessageSquare className="w-16 h-16 mx-auto text-gray-300 mb-4" />
                                    <h3 className="text-lg font-medium text-gray-700 mb-2">Centro de Mensagens</h3>
                                    <p className="text-gray-500 max-w-md mx-auto mb-4">
                                        Comunique-se diretamente com os analistas responsáveis pelos seus sinistros.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
                <Footer />
            </div>
        );
    };

    const InsurerDashboard = () => {
        const navigate = useNavigate();
        const [filter, setFilter] = useState('');
        const [activeTab, setActiveTab] = useState('all');
        const auth = useAuth();
        const mockClaims = [
            { id: "SIN-2023-0001", title: "Sinistro Automóvel - Colisão", date: "15/05/2023", clientName: "João Silva", status: "in_progress", policyNumber: "AP-2023-78945", unreadMessages: 2 },
            { id: "SIN-2023-0002", title: "Sinistro Residencial - Alagamento", date: "03/06/2023", clientName: "Maria Souza", status: "completed", policyNumber: "AP-2023-12345", unreadMessages: 0 },
            { id: "SIN-2023-0003", title: "Sinistro Saúde - Cirurgia", date: "20/06/2023", clientName: "Pedro Lima", status: "pending", policyNumber: "AP-2023-67890", unreadMessages: 1 },
            { id: "SIN-2023-0004", title: "Sinistro Viagem - Bagagem", date: "10/07/2023", clientName: "Ana Costa", status: "rejected", policyNumber: "AP-2023-98765", unreadMessages: 0 },
        ];
        const getStatusDetails = (status) => {
            switch (status) {
                case 'pending': return { text: 'Pendente', icon: Clock, colorClass: 'bg-yellow-100 text-yellow-700' };
                case 'in_progress': return { text: 'Em Análise', icon: AlertCircle, colorClass: 'bg-blue-100 text-blue-700' };
                case 'completed': return { text: 'Concluído', icon: CheckCircle, colorClass: 'bg-green-100 text-green-700' };
                case 'rejected': return { text: 'Rejeitado', icon: XCircle, colorClass: 'bg-red-100 text-red-700' };
                default: return { text: 'Desconhecido', icon: Clock, colorClass: 'bg-gray-100 text-gray-700' };
            }
        };
        const filteredClaims = mockClaims.filter(claim =>
            claim.title.toLowerCase().includes(filter.toLowerCase()) ||
            claim.id.toLowerCase().includes(filter.toLowerCase()) ||
            claim.clientName.toLowerCase().includes(filter.toLowerCase())
        );
        const getStatusCounts = (claims) => {
            const counts = { all: claims.length, pending: 0, in_progress: 0, completed: 0, rejected: 0 };
            claims.forEach(claim => {
                if (counts.hasOwnProperty(claim.status)) {
                    counts[claim.status]++;
                }
            });
            return counts;
        };
        const statusCounts = getStatusCounts(mockClaims);
        const chartData = [
            { name: "Pendentes", value: statusCounts.pending, color: "#FBBF24" },
            { name: "Em Análise", value: statusCounts.in_progress, color: "#3B82F6" },
            { name: "Concluídos", value: statusCounts.completed, color: "#10B981" },
            { name: "Rejeitados", value: statusCounts.rejected, color: "#EF4444" },
        ];
        return (
            <div className="min-h-screen flex flex-col">
                <Navbar />
                <main className="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
                    <div className="flex justify-between items-center mb-6">
                        <h1 className="text-3xl font-bold text-insurance-primary flex items-center">
                            <UserCog className="w-8 h-8 mr-2 text-insurance-secondary" />
                            Área da Seguradora
                        </h1>
                    </div>
                    <div className="grid lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2">
                            <div className="bg-white shadow-sm rounded-lg p-6 mb-6">
                                <div className="flex flex-col sm:flex-row justify-between items-center mb-4 gap-4">
                                    <div className="relative flex-grow w-full sm:w-auto">
                                        <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500" />
                                        <Input
                                            placeholder="Buscar sinistro..."
                                            className="pl-9 w-full"
                                            value={filter}
                                            onChange={(e) => setFilter(e.target.value)}
                                        />
                                    </div>
                                    <div className="w-full sm:w-auto">
                                        <Button variant="outline" className="w-full text-gray-700 hover:bg-gray-100 flex items-center">
                                            <Filter className="w-4 h-4 mr-2" />
                                            Filtros
                                        </Button>
                                    </div>
                                </div>
                                <Tabs defaultValue="all" onValueChange={setActiveTab} className="mt-4">
                                    <TabsList className="grid w-full grid-cols-2 sm:grid-cols-5">
                                        <TabsTrigger value="all">Todos ({statusCounts.all})</TabsTrigger>
                                        <TabsTrigger value="pending">Pendente ({statusCounts.pending})</TabsTrigger>
                                        <TabsTrigger value="in_progress">Em Análise ({statusCounts.in_progress})</TabsTrigger>
                                        <TabsTrigger value="completed">Concluído ({statusCounts.completed})</TabsTrigger>
                                        <TabsTrigger value="rejected">Rejeitado ({statusCounts.rejected})</TabsTrigger>
                                    </TabsList>
                                    <div className="mt-6 space-y-6">
                                        <Table>
                                            <TableHeader>
                                                <TableRow>
                                                    <TableHead>Sinistro ID</TableHead>
                                                    <TableHead>Cliente</TableHead>
                                                    <TableHead>Data</TableHead>
                                                    <TableHead>Status</TableHead>
                                                    <TableHead className="text-right">Ações</TableHead>
                                                </TableRow>
                                            </TableHeader>
                                            <TableBody>
                                                {filteredClaims.filter(c => activeTab === 'all' || c.status === activeTab).map(claim => {
                                                    const statusDetails = getStatusDetails(claim.status);
                                                    return (
                                                        <TableRow key={claim.id}>
                                                            <TableCell className="font-medium">{claim.id}</TableCell>
                                                            <TableCell>{claim.clientName}</TableCell>
                                                            <TableCell>{claim.date}</TableCell>
                                                            <TableCell>
                                                                <Badge className={`${statusDetails.colorClass} px-3 py-1 rounded-full flex items-center`}>
                                                                    <statusDetails.icon className="w-3 h-3 mr-1" />
                                                                    {statusDetails.text}
                                                                </Badge
